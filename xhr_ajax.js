import{mime}from"../js_mime_presets/mime_presets.js";function xhrDefaults(e){return e.method||(e.method="GET"),e.mime||(e.mime=mime.html),e.async||(e.async=!0),e.contentCharset||(e.contentCharset="UTF-8"),e.contentType||(e.contentType=`${e.mime}; charset=${e.contentCharset}`),e}export function readTextFile(e,t,s=null){e=xhrDefaults(e);const n=new XMLHttpRequest;n.open(e.method,e.url,e.async),n.onerror=function(){},n.setRequestHeader("Content-Type",e.contentType),e.headers&&e.headers.forEach((e=>{void 0!==e&&n.setRequestHeader(e.name,e.value)})),n.onreadystatechange=function(){4===n.readyState&&("200"==n.status&&t?t(n.responseText):t({status:n.status,response:n.responseText}))},n.send(s)}